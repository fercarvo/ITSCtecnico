<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<title>ITSC audiograma</title>

	<!--<script src="media/js/ba-debug.min.js"></script>-->

	<script src="media/js/jquery.js"></script>
	<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>-->
	<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script>-->

	<script src="media/js/jquery.audiogram.js"></script>
	<link rel="stylesheet" type="text/css" href="media/css/style.css">


	<style>
		html { overflow: hidden; }
		body {
			/*transform: scale(0.755);*/
			transform-origin: 0 0;
		}
	</style>

	<script>
		var urlParams = new URLSearchParams(window.location.search);
		var AD = urlParams.getAll('ad') || [];
		var AI = urlParams.getAll('ai') || [];
		var OI = urlParams.getAll('oi') || [];
		var OD = urlParams.getAll('od') || [];

		var height = urlParams.get('height')

		//window.onresize = function(evt) { size(evt) };
		window.onload = function (evt) { size(evt) };

		function size (e) {
			
			var width_window = window.innerWidth || document.body.clientWidth;
			var height_window = window.innerHeight || document.body.clientHeight;

			var ideal_size = height ? height : 600;
			var final_size = width_window <= height_window ? width_window : height_window;
			var reducer = final_size < ideal_size ? (final_size/ideal_size) : 1.0;
			

			console.log(final_size, reducer)

			for(i = 0; i < 8; i++){
				document.getElementById("ad"+i).innerHTML = AD[i]==undefined||AD[i]==0?"":AD[i];
				document.getElementById("od"+i).innerHTML = OD[i]==undefined||OD[i]==0?"":OD[i];
				document.getElementById("ai"+i).innerHTML = AI[i]==undefined||AI[i]==0?"":AI[i];
				document.getElementById("oi"+i).innerHTML = OI[i]==undefined||OI[i]==0?"":OI[i];
			}	

			$('#idmagico').audiogram({
				cvHeight : ideal_size,
				cvWidth : ideal_size
			})

			document.body.style.transform = `scale(${reducer})`
		}
	</script>
<head>
<body>
<table id="idmagico">
	<thead>
		<tr>
			<th>Frecuencia</th>
			<th>Aérea Derecha</th>
			<th>Ósea Derecha</th>
			<th>Aérea Izquiera</th>
			<th>Ósea Izquierda</th>
			<th>Sound Field Unaided</th>
			<th>Sound Field Aided</th>
			<th>Cochlear Implant</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>t250</td>
			<td id='ad0'></td>
			<td id='od0'></td>
			<td id='ai0'></td>
			<td id='oi0'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t500</td>
			<td id='ad1'></td>
			<td id='od1'></td>
			<td id='ai1'></td>
			<td id='oi1'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t1k</td>
			<td id='ad2'></td>
			<td id='od2'></td>
			<td id='ai2'></td>
			<td id='oi2'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t2k</td>
			<td id='ad3'></td>
			<td id='od3'></td>
			<td id='ai3'></td>
			<td id='oi3'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t3k</td>
			<td id='ad4'></td>
			<td id='od4'></td>
			<td id='ai4'></td>
			<td id='oi4'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t4k</td>
			<td id='ad5'></td>
			<td id='od5'></td>
			<td id='ai5'></td>
			<td id='oi5'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t6k</td>
			<td id='ad6'></td>
			<td id='od6'></td>
			<td id='ai6'></td>
			<td id='oi6'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td>t8k</td>
			<td id='ad7'></td>
			<td id='od7'></td>
			<td id='ai7'></td>
			<td id='oi7'></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
	</tbody>
</table>
</body>
</html>